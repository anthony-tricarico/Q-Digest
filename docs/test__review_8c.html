<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Parallel Q-Digest: mpi-implementation/src/test_review.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Parallel Q-Digest
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('test__review_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">test_review.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file contains a small test carried out to check that the end-to-end workflow would work as expected. The operations performed in this file replicate what would happen normally when a quantile query is issued and data from different nodes should be retrieved and aggregated according to the rules set by the Q-Digest data structure. On a more technical note, the algorithm works as follows:  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;mpi.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &quot;<a class="el" href="tree__reduce_8h_source.html">../include/tree_reduce.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="memory__utils_8h_source.html">../../include/memory_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="qcore_8h_source.html">../../include/qcore.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af55149bc1f05cf18af067a302e31e3f9" id="r_af55149bc1f05cf18af067a302e31e3f9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af55149bc1f05cf18af067a302e31e3f9">DATA_SIZE</a>&#160;&#160;&#160;300</td></tr>
<tr class="memitem:a97d832ae23af4f215e801e37e4f94254" id="r_a97d832ae23af4f215e801e37e4f94254"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a97d832ae23af4f215e801e37e4f94254">K</a>&#160;&#160;&#160;200</td></tr>
<tr class="memitem:a44b4de4784f751e71fad94edd351ff41" id="r_a44b4de4784f751e71fad94edd351ff41"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44b4de4784f751e71fad94edd351ff41">LOWER_BOUND</a>&#160;&#160;&#160;0</td></tr>
<tr class="memitem:a2d37d1eb5ea11e4dbc41c369421c2e45" id="r_a2d37d1eb5ea11e4dbc41c369421c2e45"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2d37d1eb5ea11e4dbc41c369421c2e45">UPPER_BOUND</a>&#160;&#160;&#160;20</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2c77f260528b7baedf133ce786c46a66" id="r_a2c77f260528b7baedf133ce786c46a66"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2c77f260528b7baedf133ce786c46a66">compute_median</a> (int *buf, size_t size)</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe" id="r_a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains a small test carried out to check that the end-to-end workflow would work as expected. The operations performed in this file replicate what would happen normally when a quantile query is issued and data from different nodes should be retrieved and aggregated according to the rules set by the Q-Digest data structure. On a more technical note, the algorithm works as follows: </p>
<ol type="1">
<li>Data is simulated and sent from process 0 to each node making sure that each process receives equally-sized integer-valued vectors. This is achieved by using <span class="tt">MPI_Scatterv</span>.</li>
<li>The maximum <span class="tt">upper_bound</span> of the data distribution (i.e., the largest integer contained in the vector) is extracted and it is compared to all the other maximums extracted from the other processes. The largest integer among those is saved in the variable <span class="tt">global_upper_bound</span> with the use of <span class="tt">MPI_Allreduce</span>.</li>
<li>Each process builds its own Q-Digest from the vector of data received, using the <span class="tt">global_upper_bound</span> as its <span class="tt">upper_bound</span> parameter.</li>
<li>A binary tree reduce is performed to merge all Q-Digests at each step with other Q-Digest in their relative partner processes until a single Q-Digest is created and can be queried to answer the quantile query that was originally requested by the user. </li>
</ol>
</div><a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="af55149bc1f05cf18af067a302e31e3f9" name="af55149bc1f05cf18af067a302e31e3f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af55149bc1f05cf18af067a302e31e3f9">&#9670;&#160;</a></span>DATA_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DATA_SIZE&#160;&#160;&#160;300</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a97d832ae23af4f215e801e37e4f94254" name="a97d832ae23af4f215e801e37e4f94254"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97d832ae23af4f215e801e37e4f94254">&#9670;&#160;</a></span>K</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define K&#160;&#160;&#160;200</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a44b4de4784f751e71fad94edd351ff41" name="a44b4de4784f751e71fad94edd351ff41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44b4de4784f751e71fad94edd351ff41">&#9670;&#160;</a></span>LOWER_BOUND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOWER_BOUND&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2d37d1eb5ea11e4dbc41c369421c2e45" name="a2d37d1eb5ea11e4dbc41c369421c2e45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d37d1eb5ea11e4dbc41c369421c2e45">&#9670;&#160;</a></span>UPPER_BOUND</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UPPER_BOUND&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a2c77f260528b7baedf133ce786c46a66" name="a2c77f260528b7baedf133ce786c46a66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c77f260528b7baedf133ce786c46a66">&#9670;&#160;</a></span>compute_median()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int compute_median </td>
          <td>(</td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a840291bc02cba5474a4cb46a9b9566fe" name="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_cb97de7279c00998c4e56b74fc9b6627.html">mpi-implementation</a></li><li class="navelem"><a href="dir_ce57935cef07cd6f4b9a40a6f2d6afa7.html">src</a></li><li class="navelem"><a href="test__review_8c.html">test_review.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
