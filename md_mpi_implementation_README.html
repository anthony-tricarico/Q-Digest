<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Parallel Q-Digest: Instruction to run first version of MPI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Parallel Q-Digest
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_mpi_implementation_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Instruction to run first version of MPI </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>"cd mpi-implementation"</li>
<li>make clean -&gt; make main-mpi</li>
<li>make run-local-test</li>
</ul>
<h1><a class="anchor" id="autotoc_md9"></a>
MPI Implementation</h1>
<p>The first attempt to parallelize the algorithm is implemented using the Message Passing Interface (MPI). MPI is a common API used to develop distributed-memory programs. The approach that will be attempted in the current implementation will be SPMD-oriented. A Single Program Multiple Data approach takes advantage of branching, as determined by the programmer, to write the main logic of the program inside a single source file. This means that to make a parallel program using this approach the first problem that should be tackled is how to distribute the work across the various processes (<b>load balancing</b>).</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Load balancing</h2>
<p>The first approach is to use a load balancing strategy that equally divides the work across the various processes. So, given an input vector of size <code>n</code>, the single process reading that input and saving it into memory, will have to then send only the necessary portions (approximately of size <code>n/p</code>) to all the other processes so that the workload is equally distributed among all processes.</p>
<p>Each process will then be in charge of:</p>
<ol type="1">
<li>allocate memory for the vector.</li>
<li>receive the vector from the designated distributing process.</li>
<li>build a q-digest from the received data (<code>insert</code> + vector iteration)</li>
<li>compress the resulting q-digest (<code>compress</code>)</li>
</ol>
<p>Now we face two alternatives:</p>
<ul>
<li>Either all processes send the resulting q-digest back to the distributing node</li>
<li>or each process sends to a partner process its q-digest and the partner process will then be in charge of merging the two q-digests and so on until a final q-digest containing data from all processes is available back in the distributing process.</li>
</ul>
<h3><a class="anchor" id="autotoc_md11"></a>
Potential issues</h3>
<p>It is still unclear how q-digests should be sent around processes. Probably, there will be the need to serialize each q-digest and implement a parser so that the message sent every time is a string that can be parsed to rebuild a specific q-digest.</p>
<p>A possible alternative would be the creation of a <em>derived MPI Type</em>. This would contain the necessary info to rebuild the q-digest struct.</p>
<p>Considering that most of the overhead in an MPI program is represented by the communication portion consisting of the message exchange among processes, this decision is expected to have a significant impact on the performance of the program as a whole.</p>
<p>On the one hand, passing a serialized string can streamline the communication process since passing an array of single bytes is usually better than transmitting 64-bit pointers. On the other hand, there is a tradeoff since now the q-digest will have to be rebuilt (deserialized) from the string. This tradeoff should be evaluated strictly in the benchmarking section to determine if it is truly valuable to retain it as is or if this approach does not prove to be viable.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
TODO</h2>
<p>In order to follow up with a possible solution to what discussed above the following (experimental) steps can be taken.</p>
<ol type="1">
<li>Implement a serialization for the q-digest and a related parser to allow the structure to be rebuilt in other processes by simply passing the string-serialized version.</li>
<li>Implement a potential <em>MPI Derived Datatype</em> to transmit info about q-digest and pass it "as-is" to other processes. </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
